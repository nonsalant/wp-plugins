{"version":3,"file":"index.js","sources":["../../../../dev/copy-button.js"],"sourcesContent":["const copyButtons = document.querySelectorAll(\".code--copy-button\")\ncopyButtons.forEach((copy) => {\n    addHiddenTextareaAfter(copy)\n})\n\n// â†ª Delegate event listeners\ndocument.addEventListener(\"click\", (e) => {\n    const copy = e.target.closest(\".code--copy-button\");\n    if (copy) {\n        e.preventDefault();\n        const code = copy.closest(\"details\").querySelector(\"code\")\n\n        // BUG: code is inaccessible when details not open\n        copy.closest(\"details\").open = true; // fix: open details first\n\n        const input = copy.nextSibling\n        input.value = code.innerText\n        // console.log(input.value)\n\n        // pulsate(copy.closest(\"details\").querySelector(\"pre\"))\n        // pulsate(code)\n        // BUG: CSS nesting doesn't work in Firefox so \"&\" selectors won't work\n        pulsate(code.querySelector(\"& > .token\"))\n\n        const originalText = copy.innerText\n        input.select() //select input value\n        if (document.execCommand(\"copy\")) { // if \"copy\" command is available\n            copy.innerText = \"âœ… Copied!\";\n            setTimeout(() => {\n                window.getSelection().removeAllRanges() //remove selection from document\n                copy.innerText = \"ðŸ“‹ Copy\"\n            }, 2000);\n        }\n    }\n});\n\nfunction addHiddenTextareaAfter(el) {\n    let input = document.createElement(\"textarea\")\n    input.classList.add(\"code--copy-textarea\")\n    el.after(input)\n}\n\nfunction pulsate(el) {\n    el.classList.remove(\"pulsate\");\n    void el.offsetWidth;\n    el.classList.add(\"pulsate\");\n    setTimeout(() => {\n        el.classList.remove(\"pulsate\");\n    }, 600);\n}"],"names":["copyButtons","copy","addHiddenTextareaAfter","e","code","input","pulsate","el"],"mappings":"swBAAA,MAAMA,EAAc,SAAS,iBAAiB,oBAAoB,EAClEA,EAAY,QAASC,GAAS,CAC1BC,EAAuBD,CAAI,CAC/B,CAAC,EAGD,SAAS,iBAAiB,QAAUE,GAAM,CACtC,MAAMF,EAAOE,EAAE,OAAO,QAAQ,oBAAoB,EAClD,GAAIF,EAAM,CACNE,EAAE,eAAc,EAChB,MAAMC,EAAOH,EAAK,QAAQ,SAAS,EAAE,cAAc,MAAM,EAGzDA,EAAK,QAAQ,SAAS,EAAE,KAAO,GAE/B,MAAMI,EAAQJ,EAAK,YACnBI,EAAM,MAAQD,EAAK,UAMnBE,EAAQF,EAAK,cAAc,YAAY,CAAC,EAEnBH,EAAK,UAC1BI,EAAM,OAAQ,EACV,SAAS,YAAY,MAAM,IAC3BJ,EAAK,UAAY,YACjB,WAAW,IAAM,CACb,OAAO,aAAc,EAAC,gBAAiB,EACvCA,EAAK,UAAY,SACpB,EAAE,GAAI,GAGnB,CAAC,EAED,SAASC,EAAuBK,EAAI,CAChC,IAAIF,EAAQ,SAAS,cAAc,UAAU,EAC7CA,EAAM,UAAU,IAAI,qBAAqB,EACzCE,EAAG,MAAMF,CAAK,CAClB,CAEA,SAASC,EAAQC,EAAI,CACjBA,EAAG,UAAU,OAAO,SAAS,EACxBA,EAAG,YACRA,EAAG,UAAU,IAAI,SAAS,EAC1B,WAAW,IAAM,CACbA,EAAG,UAAU,OAAO,SAAS,CAChC,EAAE,GAAG,CACV"}